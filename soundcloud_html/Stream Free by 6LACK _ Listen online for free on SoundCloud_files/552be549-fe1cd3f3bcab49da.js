(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9721],{26177:function(e){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,(function(t){return e[t]}).bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=44)}([function(e,t,r){"use strict";var n=r(6);e.exports=function(e){if(!n(e))throw TypeError("Cannot use null or undefined");return e}},function(e,t,r){"use strict";var n=r(7),o=r(37),i=r(22),a=r(38),s=r(39);(e.exports=function(e,t){var r,o,u,l,c;return arguments.length<2||"string"!=typeof e?(l=t,t=e,e=null):l=arguments[2],n(e)?(r=s.call(e,"c"),o=s.call(e,"e"),u=s.call(e,"w")):(r=u=!0,o=!1),c={value:t,configurable:r,enumerable:o,writable:u},l?i(a(l),c):c}).gs=function(e,t,r){var u,l,c,d;return"string"!=typeof e?(c=r,r=t,t=e,e=null):c=arguments[3],n(t)?o(t)?n(r)?o(r)||(c=r,r=void 0):r=void 0:(c=t,t=r=void 0):t=void 0,n(e)?(u=s.call(e,"c"),l=s.call(e,"e")):(u=!0,l=!1),d={get:t,set:r,configurable:u,enumerable:l},c?i(a(c),d):d}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deferException=function(e){try{e()}catch(e){window.setTimeout(function(){throw e},0)}}},function(e,t,r){"use strict";e.exports=r(82)()?r(15).Symbol:r(85)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),o=function(){function e(){this._listeners=[],this.dispatch=this.dispatch.bind(this)}return e.prototype.subscribe=function(e){var t=this,r={fn:e,payloads:[]};return this._listeners.push(r),{remove:function(){var e=t._listeners.indexOf(r);return e>=0&&(t._listeners.splice(e,1),!0)},retrieve:function(){return t._dispatchListenerPayloads(r)}}},e.prototype.dispatch=function(e,t){var r=this,o="number"==typeof t?{time:t}:t||{},i=void 0!==o.time?o.time:n.now(),a=this._listeners;a.forEach(function(t){return t.payloads.push({time:i,payload:e})});var s=!1;do s=!a.some(function(e){var t=e.fn,n=e.payloads.shift();return!!n&&(r._callHandler(t,n),!0)});while(!s)},e.prototype.getHandle=function(){return{subscribe:this.subscribe.bind(this)}},e.prototype._dispatchListenerPayloads=function(e){for(var t=e.fn,r=e.payloads;;){var n=r.shift();if(!n)break;this._callHandler(t,n)}},e.prototype._callHandler=function(e,t){try{e(t.payload,t.time)}catch(e){window.setTimeout(function(){throw e},0)}},e}();t.EventDispatcher=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getCode=function(){return"PLAYER_FATAL_ERROR"},t}(r(12).PlayerError);t.PlayerFatalError=i},function(e,t,r){"use strict";var n=r(68)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";var n=void 0;e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(46);t.Promise=n.Promise},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function");return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8);t.buildDeferred=function(){var e,t,r=!1;return{promise:new n.Promise(function(r,n){e=r,t=n}),resolve:function(t){r||(r=!0,e(t))},reject:function(e){r||(r=!0,t(e))},isSettled:function(){return r}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(24).isIE();t.noOpLogger={debug:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},error:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},info:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},warn:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]}},t.consoleLogger={debug:function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];n?console.log(e,r):(t=console.debug||console.log).call.apply(t,[console,e].concat(r))},error:function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];n?console.log(e,r):(t=console.error||console.log).call.apply(t,[console,e].concat(r))},info:function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];n?console.log(e,r):(t=console.info||console.log).call.apply(t,[console,e].concat(r))},warn:function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];n?console.log(e,r):(t=console.warn||console.log).call.apply(t,[console,e].concat(r))}},t.prefixLogger=function(e,t){return{debug:function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return e.debug.apply(e,["["+t+"] "+r].concat(n))},error:function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return e.error.apply(e,["["+t+"] "+r].concat(n))},info:function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return e.info.apply(e,["["+t+"] "+r].concat(n))},warn:function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return e.warn.apply(e,["["+t+"] "+r].concat(n))}}},t.cloneLogger=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{debug:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.forEach(function(e){return e.debug.apply(e,[t].concat(r))})},error:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.forEach(function(e){return e.error.apply(e,[t].concat(r))})},info:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.forEach(function(e){return e.info.apply(e,[t].concat(r))})},warn:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.forEach(function(e){return e.warn.apply(e,[t].concat(r))})}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._msg=e,this._cause=t}return e.prototype.getCode=function(){return"PLAYER_ERROR"},e.prototype.getMsg=function(){return this._msg},e.prototype.getCause=function(){return this._cause},e}();t.PlayerError=n},function(e,t,r){"use strict";var n=Object.prototype.toString,o=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===o}},function(e,t,r){"use strict";var n=Object.prototype.toString,o=n.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===o)||!1}},function(e,t,r){"use strict";e.exports=r(83)()?globalThis:r(84)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Date.now();t.now=function(){return"performance"in window&&window.performance.now?window.performance.now():Date.now()-n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.always=function(e,t){return e.then(t,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.find=function(e,t){var r=void 0;return e.some(function(e){return!!t(e)&&(r=e,!0)}),r}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,r,n){return void 0===n&&(n="The player that the proxy was controlling had a fatal error."),e.call(this,t,r,n)||this}return o(t,e),t.prototype.getCode=function(){return"PROXY_PLAYER_PROVIDED_PLAYER_FATAL_ERROR"},t}(r(33).ProxyProvidedPlayerError);t.ProxyProvidedPlayerFatalError=i},function(e,t,r){"use strict";e.exports=r(34)()?Object.setPrototypeOf:r(35)},function(e,t,r){"use strict";var n=r(7),o={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!n(e)&&hasOwnProperty.call(o,typeof e)}},function(e,t,r){"use strict";e.exports=r(74)()?Object.assign:r(75)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),o=r(10),i=r(17),a=r(2),s=r(4);t.abortedError=Error("Job aborted."),t.map=function(e,t){var r=t.convertResult,n=t.convertProgressUpdate,i=t.abortableJobOpts,a=t.passThroughAbort,l=void 0===a||a;return new u(function(){var t=e(),i=new s.EventDispatcher,a=!0,u=o.buildDeferred();return n&&t.onProgressUpdate(function(e){i.dispatch(n(e,a)),a=!1},{skipPast:!0}),t.onCompletion(function(e){try{u.resolve(r(e))}catch(e){u.reject(e)}}),t.onError(u.reject),{result:u.promise,progressUpdates:n?{onProgressUpdate:i,getProgressSoFar:function(){var e=t.getProgressSoFar();if(e){var r=n(e,a);return a=!1,r}return null}}:void 0,abort:function(){return l&&t.abort()}}},i)};var u=function(){function e(e,t){void 0===t&&(t={}),this._job=e,this._opts=t,this._counter=0,this._jobControl=null,this._promise=null,this._jobCompleted=!1}return e.prototype.run=function(){var e,r=this;if(this._jobControl)e=this._jobControl;else{try{e=this._jobControl=this._job()}catch(t){e=this._jobControl={result:n.Promise.reject(t)}}this._promise=e.result,i.always(this._promise,function(){r._jobCompleted=!0,r._opts.storeResult||(r._jobCompleted=!1,r._promise=null,r._jobControl=null)})}var s=this._promise;this._counter++;var u=o.buildDeferred(),l=!1,c=!1,d=void 0,f=!1,p=[],_=[],h=[];return i.always(s,function(){!f&&(l=!0,r._counter--),p.forEach(function(e){return e.remove()})}),s.then(function(e){f||(d=e,_.forEach(function(t){return a.deferException(function(){return t(e)})}),_.splice(0),u.resolve(e))},function(e){f||(c=!0,d=e,h.forEach(function(t){return t(e)}),h.splice(0),u.reject(e))}),{whenComplete:function(){return u.promise},onProgressUpdate:function(t,r){if(void 0===r&&(r={}),e.progressUpdates){if(!f&&!l){var n=e.progressUpdates.onProgressUpdate.subscribe(function(e){return t(e)});p.push(n)}if(!r.skipPast){var o=e.progressUpdates.getProgressSoFar();o&&t(o)}}},getProgressSoFar:function(){return e.progressUpdates?e.progressUpdates.getProgressSoFar():null},onCompletion:function(e){l?c||a.deferException(function(){return e(d)}):_.push(e)},onError:function(e){f?a.deferException(function(){return e(t.abortedError)}):l?c&&a.deferException(function(){return e(d)}):h.push(e)},hasCompleted:function(){return l},hasErrored:function(){return c},isAborted:function(){return f},abort:function(){f||l||(f=!0,p.forEach(function(e){return e.remove()}),0==--r._counter&&!r._jobCompleted&&r._jobControl&&r._jobControl.abort&&(r._jobControl.abort(),r._promise=null,r._jobControl=null),h.forEach(function(e){return a.deferException(function(){return e(t.abortedError)})}),u.reject(t.abortedError))}}},e}();t.AbortableJob=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof navigator?navigator.userAgent:"",o=!/chrome|opera/i.test(n)&&/safari/i.test(n),i=n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0,a=n.indexOf("Edge/")>=0,s=/Chrom(?:e|ium)/.test(n),u=n.toLowerCase().indexOf("firefox")>=0,l=/version\/(\d+)\.(\d+)/i,c=/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\.([0-9]+)/,d=/Firefox\/(\d+)\.(\d+)/;function f(e){var t="undefined"!=typeof navigator?navigator.userAgent.match(e):null;if(t&&t.length>=3){var r=parseInt(t[1],10),n=parseInt(t[2],10);if(!isNaN(r)&&!isNaN(n))return{major:r,minor:n}}return null}t.isSafari=function(){return o},t.isFirefox=function(){return u},t.isChrome=function(){return s},t.isIE=function(){return i},t.isEdge=function(){return a},t.getSafariVersion=function(){return f(l)},t.getChromeVersion=function(){return f(c)},t.getFirefoxVersion=function(){return f(d)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(26),s=r(12),u=r(5),l=r(11),c=r(4),d=r(33),f=r(19),p=function(e){function t(t){var r=e.call(this,t)||this;return r._onProvidedPlayerError=new c.EventDispatcher,r._errorHandler=null,r._changeHandler=null,r._player=null,r._instanceLock=null,r._playConfig=void 0,r._pauseConfig=void 0,r._seekConfig=void 0,r._lastPlayerPosition=0,r._initialProvidedPlayerPosition=0,r._synced=!1,r._unsyncInProgress=!1,r._seekingProvidedPlayer=!1,r._logger=l.prefixLogger(r._logger,"ProxyPlayerBase"),r.onProvidedPlayerError=r._onProvidedPlayerError.getHandle(),r}return o(t,e),t.prototype.getBufferedTimeRanges=function(){return this._player&&this._synced?this._player.getBufferedTimeRanges():null},t.prototype.getCurrentBufferedTimeRange=function(){return this._player&&this._synced?this._player.getCurrentBufferedTimeRange():null},t.prototype.getMaxBufferLength=function(){return this._player&&this._synced?this._player.getMaxBufferLength():null},t.prototype._providePlayer=function(e,t){if(void 0===t&&(t={}),t=i({syncPosition:!0,syncVolume:!0},t),this._ensureNotDead(),this._player)throw Error("A player has already been provided.");this._logger.debug("providePlayer() called."),this._instanceLock=Object.create(null),this._player=e,this._sync(t)},t.prototype._removePlayer=function(){var e=this;if(this._ensureNotDead(),!this._player)throw Error("There is no player to remove.");if(this._unsyncInProgress)throw Error("Player is currently unsyncing.");this._logger.debug("removePlayer() called."),this._instanceLock=null,this._unsync(),this._player=null,this.isReady()&&!this.isDead()&&this._update(function(){var t=null!==e._getQueuedSeekPosition();e._notifyFading(!1),t||null===e._getQueuedSeekPosition()||e._signalSeekComplete(),e._notifyFadingForSeek(!1),e._notifyStalled(!0)})},t.prototype._setInitialDuration=function(e){var t=this;if(this._ensureNotDead(),e<0)throw Error("Cannot set duration to a value < 0.");null===this.getDuration()&&this._update(function(){t._ensureBelowPosition(e),t._provideDuration(e),t.isReady()||(t._signalReady(),t._handleSkippedSeek())})},t.prototype._triggerError=function(t){e.prototype._triggerError.call(this,t)},t.prototype._getPlayer=function(){return this.isDead()?null:this._player},t.prototype._handleVolumeChange=function(e,t){this._synced&&this._player?this._player.setVolume(e,t):this._notifyVolumeChange(e,t)},t.prototype._handlePlayPauseChange=function(e,t){var r=this,n=t.fadeRate;e?this._playConfig={fadeDuration:void 0!==n?1/n:0}:this._pauseConfig={fadeDuration:void 0!==n?-1/n:0};var o=this._player;if(o){var i=this._instanceLock;this._update(function(){if(e)r._playAndHandleAbort(o);else{if(r._pauseAndHandleAbort(o),r._instanceLock!==i)return;o.isFading()&&r._notifyFading(!0)}})}},t.prototype._handleSeekChange=function(e,t){var r=t.fadeRate;this._seekConfig={fadeOutDuration:void 0!==r.beforeSeek?-1/r.beforeSeek:0,fadeInDuration:void 0!==r.afterSeek?1/r.afterSeek:0};var n=this._player,o=this._instanceLock;if(n&&this._synced){if(this._seekingProvidedPlayer=!0,n.seek(e,this._seekConfig),o!==this._instanceLock)return;this._seekingProvidedPlayer=!1,n.isFadingForSeek()&&this._notifyFadingForSeek(!0)}},t.prototype._getPosition=function(){if(this._player&&this._synced){if(!this._changeHandler)throw Error("Handler should exist.");if(this._changeHandler.retrieve(),this._synced)return this._player.getPosition()}return this._lastPlayerPosition},t.prototype._kill=function(){this._player&&(this._unsync(),this._player.kill()),this._player=null},t.prototype._handleSkippedSeek=function(){if(this._player&&this._synced){var e=this.getSeekState(),t=this._player.getSeekState();e&&"IN_PROGRESS"===e.state&&(!t||"IN_PROGRESS"!==t.state)&&(this._logger.debug("Signalling seek as complete on proxy because provided player isn't seeking."),this._signalSeekComplete())}},t.prototype._ensureBelowPosition=function(e){this.getPosition()>e&&(this._logger.debug("Capping position.",e),this._seek(e,!0),this.isReady()&&(this._lastPlayerPosition=e,this._signalSeekComplete()))},t.prototype._sync=function(e){var t=this,r=this._player;if(!r)throw Error("Player should have become available by now.");if(this._logger.debug("Syncing...",this.isPlaying(),this.isActuallyPlaying()),r.isDead()){this._logger.debug("Provided player is dead.");var n=r.getFatalError();n&&this._handleFatalError(n,r);return}this._errorHandler=r.onError.subscribe(function(e){e instanceof u.PlayerFatalError?t._onProvidedPlayerError.dispatch(new f.ProxyProvidedPlayerFatalError(e,r)):(t._triggerError(e),t._onProvidedPlayerError.dispatch(new d.ProxyProvidedPlayerError(e,r)))}),this._changeHandler=r.onChange.subscribe(function(e){t._update(function(){if(t._logger.debug("Handling changes.",e),e.dead){t._logger.debug("Player has gone to DEAD state."),t._unsync(),!t.isDead()&&e.fatalError&&t._handleFatalError(e.fatalError,r);return}(void 0!==e.volume||void 0!==e.muted)&&t._notifyVolumeChange(r.getVolume(),r.getMuted()),void 0===e.duration||(t._ensureBelowPosition(e.duration),t._provideDuration(e.duration),t.isReady()||(t._signalReady(),t._handleSkippedSeek(),t._notifyStalled(r.isStalled())));var n=t.getSeekState();e.seekBlockedError&&t._seekingProvidedPlayer&&(t._synced?t._signalSeekBlocked(e.seekBlockedError):n&&"IN_PROGRESS"===n.state?t._notifySeekRejection(e.seekBlockedError):(t._logger.debug("Provided player blocked seek when trying to sync."),t._seek(t._initialProvidedPlayerPosition,!0),t._signalSeekComplete())),e.seek&&(n&&"IN_PROGRESS"===n.state||"IN_PROGRESS"!==e.seek.state?n&&"IN_PROGRESS"===n.state&&("COMPLETED"===e.seek.state&&n.position===e.seek.position?(t._signalSeekComplete(),r.isFadingForSeek()&&t._notifyFadingForSeek(!0)):"COMPLETED"===e.seek.state&&n.position!==e.seek.position?t._notifySeekRejection(Error("Another seek occurred to a different position.")):"IN_PROGRESS"===e.seek.state&&n.position!==e.seek.position?t._seek(e.seek.position,!0):"ERROR"===e.seek.state&&t._notifySeekRejection(e.seek.error)):t._seek(e.seek.position,!0)),void 0!==e.stalled&&t._notifyStalled(e.stalled),!1===e.playing&&e.playRejection?t.isActuallyPlaying()?(t._triggerError(new s.PlayerError("Paused because a player was provided that refused to play.")),t._notifyPlaying(!1)):t._notifyPlayRejection(e.playRejection):!1===e.playing&&(r.isActuallyPlaying()?t.pause():void 0===e.actuallyPlaying&&t.isReady()&&t._notifyPlaying(!1)),!0===e.playing&&e.pauseRejection?t._notifyPauseRejection(e.pauseRejection):!0===e.playing&&t.play(),void 0!==e.actuallyPlaying&&e.actuallyPlaying!==t.isActuallyPlaying()&&(t._notifyPlaying(e.actuallyPlaying),e.actuallyPlaying&&r.isFading()&&t._notifyFading(!0)),!1===e.fading&&t._notifyFading(!1),!1===e.fadingForSeek&&t._notifyFadingForSeek(!1)})}),this._update(function(){var n=t._instanceLock;try{if(t._notifyStalled(r.isStalled()),r.isReady()){var o=r.getDuration();t._ensureBelowPosition(o),t._provideDuration(o),t.isReady()||(t._logger.debug("Provided player is already ready. Making proxy player ready."),t._signalReady())}if(e.syncVolume&&(r.setVolume(t.getVolume(),t.getMuted()),t._instanceLock!==n))return;var i=t.getSeekState();if(e.syncPosition){t._logger.debug("Seeking to match position.");var a=t.getPosition(),s=t._initialProvidedPlayerPosition=r.getPosition();if(t._instanceLock!==n)return;if(s!==a){if(t._seekingProvidedPlayer=!0,r.seek(a),t._instanceLock!==n)return;t._seekingProvidedPlayer=!1}else t._logger.debug("Skipping seek because already at same position."),t.isReady()&&i&&"IN_PROGRESS"===i.state&&t._signalSeekComplete()}else if(i&&"IN_PROGRESS"===i.state){if(t._logger.debug("Seeking to match position because a seek has been queued."),r.seek(t.getPosition(),t._seekConfig),t._instanceLock!==n)return}else{var l=r.getSeekState();l&&"IN_PROGRESS"===l.state&&(t._logger.debug("Seeking on proxy to match seek that is in progress on provided player."),t._seek(l.position,!0))}if(r.isActuallyPlaying()?(t._logger.debug("Provided player is already playing."),!t.isActuallyPlaying()&&(t._notifyPlaying(!0),r.isFading()&&t._notifyFading(!0))):r.isPlaying()?(t._logger.debug("Provided player is preparing to play."),t.play()):t.isPlaying()?(t._logger.debug("Calling play() on provided player to match proxy."),t._playAndHandleAbort(r)):t.isReady()&&t.isActuallyPlaying()&&(t._logger.debug("Switching to paused state, as provided player and proxy intended state is paused."),t._notifyPlaying(!1)),t._instanceLock!==n)return;t._synced=!0,t._notifyVolumeChange(r.getVolume(),r.getMuted())}catch(e){t._triggerError(new u.PlayerFatalError("Unexpected error occurred whilst syncing.",e))}})},t.prototype._playAndHandleAbort=function(e){var t=this._instanceLock;this._logger.debug("Calling play() on provided player."),e.play(this._playConfig),this._instanceLock===t&&!e.isPlaying()&&this.isPlaying()&&(this._logger.debug("Provided player was not playing after play() call completed."),this.isActuallyPlaying()?(this._triggerError(new s.PlayerError("Paused because a player was provided that refused to play.")),this._notifyPlaying(!1)):this.pause())},t.prototype._pauseAndHandleAbort=function(e){var t=this._instanceLock;this._logger.debug("Calling pause() on provided player."),e.pause(this._pauseConfig),this._instanceLock===t&&e.isPlaying()&&!this.isPlaying()&&(this._logger.debug("Provided player was not paused after pause() call completed."),this.play())},t.prototype._unsync=function(){if(this._logger.debug("Unsyncing..."),this._changeHandler&&(this._changeHandler.remove(),this._changeHandler=null),this._errorHandler&&(this._errorHandler.remove(),this._errorHandler=null),!this._synced){this._logger.debug("Unsynced. (Sync never completed)");return}this._synced=!1,this._unsyncInProgress=!0;var e=this._player;if(e)try{this._lastPlayerPosition=e.getPosition()}catch(e){this._logger.error("Error whilst unsyncing.",e)}this._unsyncInProgress=!1,this._seekingProvidedPlayer=!1,this._logger.debug("Unsynced.",this.isPlaying(),this.isActuallyPlaying())},t}(a.BasePlayer);t.ProxyPlayerBase=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),o=r(27),i=r(4),a=r(10),s=r(18),u=r(16),l=r(8),c=r(28),d=r(11),f=r(29),p=r(31),_=r(2),h=r(51),g=r(32),y=function(){function e(e){var t=this;this._stateManager=new f.StateManager({ended:!1,loading:!1,playing:!1,actuallyPlaying:!1,volume:1,muted:!1,isFading:!1,fadeRate:null,isFadingForSeek:!1,playDeferred:null,pauseDeferred:null,ready:!1,seeking:!1,seek:null,seekBlockedError:null,positionJumped:null,stalled:!0,duration:null,dead:!1,state:c.State.PAUSED,fatalError:null,errorOccurred:null,position:0},{afterUpdate:function(e,r){return t._afterUpdate(e,r)},afterDispatches:function(){return t._afterDispatches()},beforeUpdate:function(e){if(!e.dead&&(e.ready||!t._fatalErrorTriggered)){var r=t._getPosition(),n=e.duration;if(r<0)throw t._logger.error("Player provided invalid position.",r,n),t._triggerError(new p.ImplementationError("Player provided a position that was invalid.")),Error("Player provided invalid position.");e.position=r,t._updateEndedInState(e)}}}),this._onError=new i.EventDispatcher,this._errors=[],this._fatalErrorTriggered=!1,this._loadingDelayTimer=null,this._stalled=!1,this._queuedDuration=null,this._readyDeferred=a.buildDeferred(),this._queuedSeekDeferreds=[],this._lastPlayError=null,this._lastPauseError=null,this._lastPlayedPosition=null,this._listenTimeBase=0,this._timePlaybackStarted=null,this._positionAfterLastUpdate=0,this._positionWhenStartedFadeOut=null,this._fadeStartAllowed=!1,this._seekFadeStartAllowed=!1,this._implementationIsFading=!1,this._mediaSessionManagerHandle=null,this._activeSeek=null,this._activeSeekPositionJumped=null;var r=e.name;if(this._logger=d.prefixLogger(e.logger,"BasePlayer"+(r?"-"+r:"")),this._mediaSessionEnabled=!!e.mediaSessionEnabled,e.defaultFadeDuration&&e.defaultFadeDuration<0)throw Error("defaultFadeDuration must be >= 0.");if(e.loadingDelay&&e.loadingDelay<0)throw Error("loadingDelay must be >= 0.");this._defaultFadeDuration=void 0!==e.defaultFadeDuration?e.defaultFadeDuration:150,this._defaultSeekFadeOutDuration=void 0!==e.defaultSeekFadeOutDuration?e.defaultSeekFadeOutDuration:25,this._defaultSeekFadeInDuration=void 0!==e.defaultSeekFadeInDuration?e.defaultSeekFadeInDuration:35,this._loadingDelay=void 0!==e.loadingDelay?e.loadingDelay:1e3,this._seekStrategy=void 0!==e.seekStrategy?e.seekStrategy:g.AlwaysAllowSeekStrategy,this.onError=this._onError.getHandle(),this.whenReady=this._readyDeferred.promise,this._configureRewindAfterFadeOut(),this._stateManager.subscribe(function(e,r){return t._onChange(e,r)}),this._stateManager.subscribe(function(e){var r=e.actuallyPlaying,n=e.seek;!0===r&&(t._fadeStartAllowed=!1),n&&"IN_PROGRESS"!==n.state&&(t._seekFadeStartAllowed=!1)}),this._stateManager.subscribe(function(e,r){var n=e.isFading;!r.dead&&!1===n&&t._implementationIsFading&&t._triggerError(new p.ImplementationError("Fade was still running when not allowed."))}),this._stateManager.subscribe(function(e,r){var n=e.playing,o=r.dead,i=r.fadeRate;o||void 0===n||t._stateManager.update(function(){try{t._handlePlayPauseChange(n,{fadeRate:i||void 0}),n||(t._fadeStartAllowed=!1)}catch(e){t._triggerError(new p.ImplementationError("Exception occurred whilst handling play/pause change.",e))}})}),this._stateManager.subscribe(function(e,r){var n=e.seek;!r.dead&&n&&n!==t._activeSeek&&"IN_PROGRESS"===n.state&&t._stateManager.update(function(){try{t._seekFadeStartAllowed=!0,t._handleSeekChange(n.position,{fadeRate:{beforeSeek:n.fadeRate.beforeSeek||void 0,afterSeek:n.fadeRate.afterSeek||void 0}}),t._seekFadeStartAllowed=!1}catch(e){t._triggerError(new p.ImplementationError("Exception occurred whilst handling seek change.",e))}})}),this._stateManager.subscribe(function(e,r){var n=e.seek,o=e.seekBlockedError,i=e.positionJumped;n&&(t._activeSeek=n),i&&(t._activeSeekPositionJumped=i),t._queuedSeekDeferreds=t._queuedSeekDeferreds.filter(function(e){var n=e.position,i=e.active,a=e.deferred;if(o&&!i)return t._logger.debug("Rejecting seek() because it was blocked.",o),a.reject(o),!1;if(r.seek&&"ERROR"===r.seek.state)return t._logger.debug("Rejecting seek().",r.seek.error),a.reject(r.seek.error),!1;if(r.seek&&"COMPLETED"===r.seek.state)return!!r.stalled||(t._logger.debug("Resolving seek()."),a.resolve(),!1);if(r.seek&&"IN_PROGRESS"===r.seek.state)return n===r.seek.position||(t._logger.debug("Rejecting seek() because another seek was requested.",n),a.reject(Error("Seek request aborted because another seek was requested to a different position.")),!1);throw t._triggerError(new p.ImplementationError("Unexpected error handling seek deferreds.")),Error("Unexpected error handling seek deferreds.")}),t._queuedSeekDeferreds.forEach(function(e){return e.active=!0})}),this.onChange=this._buildEventHandle(function(e,r){var n=r.ready;if(void 0!==n&&!0!==n)throw Error("Ready state is invalid.");var o=r.duration;if(void 0!==o&&null===o)throw Error("Duration state is invalid.");var i=r.dead;if(void 0!==i&&!0!==i)throw Error("Dead state is invalid.");var a={ready:n,ended:r.ended,duration:o,volume:r.volume,muted:r.muted,playing:r.playing,actuallyPlaying:r.actuallyPlaying,stalled:r.stalled,loading:r.loading,fading:r.isFading,fadingForSeek:r.isFadingForSeek,playRejection:!1===r.playing&&t._lastPlayError||void 0,pauseRejection:!0===r.playing&&t._lastPauseError||void 0,seeking:r.seeking,seek:r.seek||void 0,seekBlockedError:r.seekBlockedError||void 0,positionJumped:void 0!==r.positionJumped||void 0,state:r.state,fatalError:r.fatalError||void 0,dead:i};Object.keys(a).some(function(e){return void 0!==a[e]})&&e(a)});var n=e.registerListeners;n&&_.deferException(function(){n({onChange:t.onChange,onError:t.onError})}),this.onDurationChange=this._buildEventHandle(function(e,t){var r=t.duration;null!=r&&e(r)}),this.onReady=this._buildEventHandle(function(e,t){!0===t.ready&&e(void 0)}),this.onStateChange=this._buildEventHandle(function(e,t){var r=t.state;void 0!==r&&e(r)}),this.onVolumeChange=this._buildEventHandle(function(e,t,r){var n=t.volume,o=t.muted,i=r.volume,a=r.muted;(void 0!==n||void 0!==o)&&e({volume:i,muted:a})}),this.onPlay=this._buildEventHandle(function(e,t){!0===t.actuallyPlaying&&e(void 0)}),this.onPlayIntent=this._buildEventHandle(function(e,t){!0===t.playing&&e(void 0)}),this.onPlayRejection=this._buildEventHandle(function(e,r){!1===r.playing&&t._lastPlayError&&e(t._lastPlayError)}),this.onPause=this._buildEventHandle(function(e,t){!1===t.actuallyPlaying&&e(void 0)}),this.onPauseIntent=this._buildEventHandle(function(e,t){!1===t.playing&&e(void 0)}),this.onPauseRejection=this._buildEventHandle(function(e,r){!0===r.playing&&t._lastPauseError&&e(t._lastPauseError)}),this.onSeek=this._buildEventHandle(function(e,t){var r=t.seek;r&&"COMPLETED"===r.state&&e(void 0)}),this.onSeekIntent=this._buildEventHandle(function(e,t){!0===t.seeking&&e(void 0)}),this.onSeekRejection=this._buildEventHandle(function(e,t){var r=t.seek;r&&"ERROR"===r.state&&e(r.error)}),this.onPositionJumped=this._buildEventHandle(function(e,t){void 0!==t.positionJumped&&e(void 0)}),this.onEnded=this._buildEventHandle(function(e,t){!0===t.ended&&e(void 0)}),this.onLeftEnded=this._buildEventHandle(function(e,t){!1===t.ended&&e(void 0)}),this.onStallStart=this._buildEventHandle(function(e,t){!0===t.stalled&&e(void 0)}),this.onStallEnd=this._buildEventHandle(function(e,t){!1===t.stalled&&e(void 0)}),this.onLoadStart=this._buildEventHandle(function(e,t){!0===t.loading&&e(void 0)}),this.onLoadEnd=this._buildEventHandle(function(e,t){!1===t.loading&&e(void 0)}),this.onFadeStart=this._buildEventHandle(function(e,t){!0===t.isFading&&e(void 0)}),this.onFadeEnd=this._buildEventHandle(function(e,t){!1===t.isFading&&e(void 0)}),this.onFadeForSeekStart=this._buildEventHandle(function(e,t){!0===t.isFadingForSeek&&e(void 0)}),this.onFadeForSeekEnd=this._buildEventHandle(function(e,t){!1===t.isFadingForSeek&&e(void 0)})}return e.prototype.isReady=function(){return this._stateManager.getState().ready},e.prototype.getPosition=function(){return this._getPositionOrPositionSeekingTo()},e.prototype.getLastPlayedPosition=function(){var e=this._stateManager.getState(),t=e.actuallyPlaying,r=e.stalled;return t&&!r?this.getPosition():this._lastPlayedPosition},e.prototype.getListenTime=function(){var e=this._stateManager.getState(),t=e.actuallyPlaying,r=e.ended,n=this._listenTimeBase;return t&&!r&&(n+=u.now()-this._timePlaybackStarted),n},e.prototype.isStalled=function(){return this._stateManager.getState().stalled},e.prototype.isLoading=function(){return this._stateManager.getState().loading},e.prototype.isFading=function(){return this._stateManager.getState().isFading},e.prototype.isFadingForSeek=function(){return this._stateManager.getState().isFadingForSeek},e.prototype.isPlaying=function(){return this._stateManager.getState().playing},e.prototype.isActuallyPlaying=function(){return this._stateManager.getState().actuallyPlaying},e.prototype.isEnded=function(){return this._stateManager.getState().ended},e.prototype.getState=function(){return this._stateManager.getState().state},e.prototype.getBufferController=function(){return null},e.prototype.getMemoryCacheMaxSize=function(){return null},e.prototype.getMemoryCacheUsage=function(){return null},e.prototype.getMemoryCacheController=function(){return null},e.prototype.getFatalError=function(){return this._stateManager.getState().fatalError},e.prototype.isDead=function(){return this._stateManager.getState().dead},e.prototype.getVolume=function(){return this._stateManager.getState().volume},e.prototype.getMuted=function(){return this._stateManager.getState().muted},e.prototype.getDuration=function(){var e=this._stateManager.getState(),t=e.ready,r=e.duration;return t?r:null},e.prototype.setVolume=function(e,t){if(e<0||e>1)throw Error("Volume must be >= 0 and <= 1.");if(!this._stateManager.getState().dead){var r=this._stateManager.getState().muted;void 0===t&&(t=r);try{this._handleVolumeChange(e,t)}catch(e){throw this._triggerError(new p.ImplementationError("Exception occurred updating volume.",e)),e}}},e.prototype.setMuted=function(e){this.setVolume(this._stateManager.getState().volume,e)},e.prototype.getCurrentBufferedTimeRange=function(){var e=this.getBufferedTimeRanges();if(!e)return null;var t=this.getPosition();return s.find(e,function(e){return e.containsTime(t)})||null},e.prototype.play=function(e){var t=this;this._ensureNotDead(),this._logger.debug("play() called.",e);var r=a.buildDeferred();try{return this._stateManager.update(function(n){if(n.playing)t._logger.debug("Intent is already to be playing.");else{t._logger.debug("Requesting play."),n.playing=!0;var o=t._extractFadeDuration(e);o?n.fadeRate=1/o:n.fadeRate=null,t._lastPlayError=null}(!n.playDeferred||n.playDeferred.isSettled())&&(n.playDeferred=a.buildDeferred()),r.resolve(n.playDeferred.promise)}),r.promise}catch(e){return this._triggerError(new n.PlayerFatalError("Unexpected error when attempting to play.",e)),l.Promise.reject(e)}},e.prototype.pause=function(e){var t=this;this._ensureNotDead(),this._logger.debug("pause() called.",e);var r=a.buildDeferred();try{return this._stateManager.update(function(n){if(n.playing){t._logger.debug("Requesting pause."),t._positionWhenStartedFadeOut=t._getPositionOrPositionSeekingTo(),n.playing=!1;var o=t._extractFadeDuration(e);o?n.fadeRate=-(1/o*1):n.fadeRate=null,t._fadeStartAllowed=!0,t._lastPauseError=null}else t._logger.debug("Intent is already to be paused.");(!n.pauseDeferred||n.pauseDeferred.isSettled())&&(n.pauseDeferred=a.buildDeferred()),r.resolve(n.pauseDeferred.promise)}),r.promise}catch(e){return this._triggerError(new n.PlayerFatalError("Unexpected error when attempting to pause.",e)),l.Promise.reject(e)}},e.prototype.seek=function(e,t){return this._seek(e,!1,t)},e.prototype.getSeekState=function(){return this._stateManager.getState().seek},e.prototype.registerMediaSessionActionHandlers=function(e){var t=this;void 0===e&&(e={play:!0,pause:!0,seekForward:!0,seekBackward:!0}),this.unregisterMediaSessionActionHandlers();var r={},n=function(e){t.isDead()||e()};e.play&&(r.play=function(){return n(function(){return t.play()})}),e.pause&&(r.pause=function(){return n(function(){return t.pause()})}),e.seekBackward&&(r.seekBackward=function(){return n(function(){t.seek(Math.max(0,t.getPosition()-5e3))})}),e.seekForward&&(r.seekForward=function(){return n(function(){t.seek(Math.min(t.getDuration()||0,t.getPosition()+5e3))})}),this._mediaSessionManagerHandle=h.mediaSessionManager.register(new h.MediaSessionItem(this,r))},e.prototype.unregisterMediaSessionActionHandlers=function(){this._mediaSessionManagerHandle&&(this._mediaSessionManagerHandle.remove(),this._mediaSessionManagerHandle=null)},e.prototype.kill=function(){var e=this;this._stateManager.update(function(t){t.dead||(e._logger.debug("kill() called."),t.dead=!0)})},e.prototype._seek=function(e,t,r){var n=this,o=function(){if(t)return!0;try{return n._seekStrategy.isSeekAllowed(e)}catch(e){return n._triggerError(new p.ImplementationError("Seek strategy threw an error.",e)),!1}};this._ensureNotDead(),this._logger.debug("seek() called.",e);var i=a.buildDeferred();return this._stateManager.update(function(t){if(e<0)n._logger.warn("Rejecting seek immediately as the position was negative."),t.seekBlockedError=Error("You were attempting to seek to a negative time.");else if(null!==t.duration&&e>t.duration)n._logger.warn("Rejecting seek immediately as the duration is now known, and the requested positon was past it."),t.seekBlockedError=Error("You were attempting to seek past the end of the media.");else if(o()){if(t.stalled||!t.actuallyPlaying||t.seek&&"IN_PROGRESS"===t.seek.state||(n._lastPlayedPosition=n._getPositionOrPositionSeekingTo()),t.seek&&"IN_PROGRESS"===t.seek.state&&t.seek.position===e)n._logger.debug("Seek already requested to the same position.",e);else{n._logger.debug("Requesting seek.",e),t.seeking=!0;var s=n._extractSeekFadeDurations(r,e),u=s.fadeOutDuration?-(1/s.fadeOutDuration*1):null,l=s.fadeInDuration?1/s.fadeInDuration:null;t.seekBlockedError=null,t.seek={state:"IN_PROGRESS",position:e,fadeRate:{beforeSeek:u,afterSeek:l}},t.positionJumped=Object.create(null)}}else n._logger.warn("Rejecting seek immediately as the seek strategy has denied it or threw an error."),t.seekBlockedError=Error("The provided seeking strategy has blocked the attempt to seek.");var c=a.buildDeferred();n._queuedSeekDeferreds.push({position:e,deferred:c,active:!1}),i.resolve(c.promise)}),i.promise},e.prototype._update=function(e){this._stateManager.update(function(){return e&&e()})},e.prototype._ensureNotDead=function(){if(this._stateManager.getState().dead)throw Error("Player is dead.")},e.prototype._notifyStalled=function(e){this._ensureNotDead(),this._stalled!==e&&(this._logger.debug("notifyStalled() called.",e),this._stalled=e,this._stateManager.update())},e.prototype._getQueuedSeekPosition=function(){var e=this.getSeekState();return e&&"IN_PROGRESS"===e.state?e.position:null},e.prototype._provideDuration=function(e){var t=this;this._ensureNotDead(),this._stateManager.update(function(r){if(r.duration!==e){var n=t._getPositionOrPositionSeekingTo();if(e<0||r.ready&&n>e)throw t._triggerError(new p.ImplementationError("Attempt to update duration to an invalid value.")),Error("Duration cannot be less than the current position.");t._logger.debug("provideDuration() called.",e),r.ready?r.duration=e:t._queuedDuration=e}})},e.prototype._notifyVolumeChange=function(e,t){if(e<0||e>1)throw this._triggerError(new p.ImplementationError("Volume was out of range.",e)),Error("Volume was out of range.");this._stateManager.update(function(r){r.volume=e,r.muted=t})},e.prototype._notifyPlaying=function(e){var t=this;this._ensureNotDead(),this._stateManager.update(function(r){if(!r.ready)throw t._triggerError(new p.ImplementationError("Attempt to register playback as started before ready.")),Error("Player must be ready first.");e!==r.actuallyPlaying&&(t._logger.debug("notifyPlaying() called.",e),e||r.seeking||r.stalled||(t._lastPlayedPosition=t._getPositionOrPositionSeekingTo()),r.actuallyPlaying=r.playing=e,e?(t._lastPlayError=null,t._fadeStartAllowed=!0):(r.isFading=!1,t._fadeStartAllowed=!1,t._lastPauseError=null))})},e.prototype._notifyPlayRejection=function(e){var t=this;this._ensureNotDead(),e=e||Error("Unknown error."),this._stateManager.update(function(r){if(!r.ready)throw t._triggerError(new p.ImplementationError("Attempt to reject a play request before player ready.")),Error("Player must be ready first.");if(r.actuallyPlaying||!r.playing)throw t._triggerError(new p.ImplementationError("Attempt to reject a play request when not valid.")),Error("Playing state is incorrect.");t._logger.debug("notifyPlayRejection() called.",e),r.playing=!1,t._lastPlayError=e})},e.prototype._notifyPauseRejection=function(e){var t=this;this._ensureNotDead(),e=e||Error("Unknown error."),this._stateManager.update(function(r){if(!r.ready)throw t._triggerError(new p.ImplementationError("Attempt to reject pause request before player ready.")),Error("Player must be ready first.");if(!r.actuallyPlaying||r.playing)throw t._triggerError(new p.ImplementationError("Attempt to reject pause request when not valid.")),Error("Playing state is incorrect.");t._logger.debug("notifyPauseRejection() called.",e),r.playing=!0,r.fadeRate&&(r.fadeRate*=-1),t._lastPauseError=e})},e.prototype._signalSeekBlocked=function(e){var t=this;void 0===e&&(e=Error("Seek blocked.")),this._ensureNotDead(),this._stateManager.update(function(r){if(t._activeSeek===r.seek||!r.seek||"IN_PROGRESS"!==r.seek.state)throw t._triggerError(new p.ImplementationError("_signalSeekBlocked called when no seek to block.")),Error("_signalSeekBlocked called when no seek to block.");if(r.isFadingForSeek)throw t._triggerError(new p.ImplementationError("_signalSeekBlocked called after fade out started.")),Error("_signalSeekBlocked called after fade out started.");r.seek=t._activeSeek,r.positionJumped=t._activeSeekPositionJumped,r.seeking=!!t._activeSeek&&"IN_PROGRESS"===t._activeSeek.state,r.seekBlockedError=e})},e.prototype._notifySeekRejection=function(e){var t=this;this._ensureNotDead(),e=e||Error("Unknown error."),this._stateManager.update(function(r){if(!r.seek||"IN_PROGRESS"!==r.seek.state)throw t._triggerError(new p.ImplementationError("Attempt to reject seek request when none requested.")),Error("A seek hasn't been requested.");if(null!==r.duration&&r.position>r.duration)throw t._triggerError(new p.ImplementationError("Attempt to reject seek request after duration changed below current position.")),Error("Attempt to reject seek request after duration changed below current position.");t._logger.debug("notifySeekRejection() called.",e),r.seeking=!1,r.seek={state:"ERROR",error:e},r.positionJumped=Object.create(null)})},e.prototype._notifyFading=function(e){var t=this;if(this._ensureNotDead(),e&&!this._fadeStartAllowed){var r="Attempt to register fade as starting when not allowed.";throw this._triggerError(new p.ImplementationError(r)),Error(r)}this._implementationIsFading=e,this._stateManager.update(function(r){r.isFading!==e&&(t._logger.debug("notifyFading() called",e),r.isFading=e)})},e.prototype._notifyFadingForSeek=function(e){var t=this;if(this._ensureNotDead(),e&&!this._seekFadeStartAllowed){var r="Attempt to register fade as starting for seek when not allowed.";throw this._triggerError(new p.ImplementationError(r)),Error(r)}this._stateManager.update(function(r){r.isFadingForSeek!==e&&(t._logger.debug("notifyFadingForSeek() called",e),r.isFadingForSeek=e)})},e.prototype._signalReady=function(){var e=this;this._ensureNotDead(),this._stateManager.update(function(t){if(t.ready)throw e._triggerError(new p.ImplementationError("Attempt to signal ready twice.")),Error("Ready already signalled.");if(null===e._queuedDuration)throw e._triggerError(new p.ImplementationError("Attempt to signal ready when duration unknown.")),Error("Duration is still unknown.");e._logger.debug("signalReady() called."),t.ready=!0,t.duration=e._queuedDuration,t.seek&&"IN_PROGRESS"===t.seek.state&&t.seek.position>t.duration&&(t.seeking=!1,t.seek={state:"ERROR",error:Error("You were attempting to seek past the end of the media.")})})},e.prototype._signalSeekComplete=function(){var e=this;this._ensureNotDead(),this._stateManager.update(function(t){if(!t.ready)throw e._triggerError(new p.ImplementationError("Attempt to signal seek as complete before player ready.")),Error("Player must be ready first.");if(!t.seek||"IN_PROGRESS"!==t.seek.state)throw e._triggerError(new p.ImplementationError("Attempt to signal seek as complete when none requested.")),Error("There shouldn't be a seek in progress.");var r=t.duration;if(t.seek&&"IN_PROGRESS"===t.seek.state&&t.seek.position>r)throw Error("Seek cannot have completed given it was to a time greater than the duration.");e._logger.debug("signalSeekComplete() called."),e._seekFadeStartAllowed=!0,e._positionWhenStartedFadeOut=null,t.seek={state:"COMPLETED",position:t.seek.position,fadeRate:t.seek.fadeRate},t.seeking=!1,t.position=t.seek.position})},e.prototype._triggerError=function(e){var t=this;e instanceof n.PlayerFatalError&&(this._fatalErrorTriggered=!0),this._stateManager.update(function(r){var i=!1;if(r.ready&&e instanceof o.NotSupportedError&&(e=new p.ImplementationError("Invalid NotSupportedError."),i=!0),e instanceof n.PlayerFatalError?(e instanceof o.NotSupportedError?t._logger.info("NotSupportedError occurred.",e):t._logger.error("Fatal error occurred.",e),r.fatalError?t._logger.warn("A fatal error already occurred.",r.fatalError):r.fatalError=e,t._errors.push(e),r.errorOccurred=Object.create(null),r.dead=!0):(t._logger.warn("Non-fatal error occurred.",e),t._errors.push(e),r.errorOccurred=Object.create(null)),i)throw Error("Not supported errors are only valid before the player is ready.")})},e.prototype._buildEventHandle=function(e){var t=this;return{subscribe:function(r){var n=function(e){return r(e,u.now())};return t._stateManager.subscribe(function(t,r){e(n,t,r)})}}},e.prototype._finalizeState=function(e){this._updateEndedInState(e);var t=this._getPositionOrPositionSeekingTo();if(e.dead)this._lastPlayError=Error("Player was killed."),e.loading=!1,this._clearLoadingDelay(),!e.playing&&e.isFading&&null!==this._positionWhenStartedFadeOut&&(this._logger.debug("Fade out was in progress. Pretending it completed."),e.isFading=!1,e.position=this._positionWhenStartedFadeOut),e.stalled=!0,e.actuallyPlaying=!1,e.isFadingForSeek=!1,e.playing=!1,e.state=c.State.DEAD;else{var r=!e.ended&&(!e.ready||this._stalled||!!(e.seek&&"IN_PROGRESS"===e.seek.state));r&&!e.stalled&&!e.seeking&&e.actuallyPlaying&&(this._lastPlayedPosition=t),e.stalled=r,!e.ended&&!e.isFading&&!e.isFadingForSeek&&(e.playing||e.actuallyPlaying)&&(e.stalled||e.playing!==e.actuallyPlaying)?this._loadingDelay?this._scheduleLoadingDelay():e.loading=!0:(e.loading=!1,this._clearLoadingDelay()),this._positionAfterLastUpdate===t||(this._positionAfterLastUpdate=t,e.playing||e.actuallyPlaying||(e.positionJumped=Object.create(null))),e.state=this._calculateState(e)}},e.prototype._updateEndedInState=function(e){e.ended=e.ready&&this._getPositionOrPositionSeekingTo()===e.duration},e.prototype._scheduleLoadingDelay=function(){var e=this;this._loadingDelayTimer||(this._loadingDelayTimer=window.setTimeout(function(){e._stateManager.update(function(e){return e.loading=!0})},this._loadingDelay))},e.prototype._clearLoadingDelay=function(){this._loadingDelayTimer&&(window.clearTimeout(this._loadingDelayTimer),this._loadingDelayTimer=null)},e.prototype._getPositionOrPositionSeekingTo=function(){this._stateManager.update();var e=this._stateManager.getState();return e.seek&&"IN_PROGRESS"===e.seek.state?e.seek.position:e.isFading&&!e.playing&&null!==this._positionWhenStartedFadeOut?this._positionWhenStartedFadeOut:e.ready&&null!==e.duration?e.position:0},e.prototype._calculateState=function(e){var t=e.dead,r=e.loading,n=e.playing,o=e.ended;return t?c.State.DEAD:r?c.State.LOADING:n&&!o?c.State.PLAYING:c.State.PAUSED},e.prototype._extractFadeDuration=function(e){return(void 0===e&&(e={}),void 0===e.fadeDuration)?!this._stateManager.getState().playing||this._getPositionOrPositionSeekingTo()>0?this._defaultFadeDuration:0:e.fadeDuration>0?e.fadeDuration:0},e.prototype._extractSeekFadeDurations=function(e,t){return void 0===e&&(e={}),{fadeOutDuration:void 0!==e.fadeOutDuration?e.fadeOutDuration>0?e.fadeOutDuration:0:this._defaultSeekFadeOutDuration,fadeInDuration:void 0!==e.fadeInDuration?e.fadeInDuration>0?e.fadeInDuration:0:t>0?this._defaultSeekFadeInDuration:0}},e.prototype._configureRewindAfterFadeOut=function(){var e=this;this._stateManager.subscribe(function(t,r){var n=t.isFading,o=r.seeking,i=r.playing;r.dead||!1!==n||i||null===e._positionWhenStartedFadeOut||o||e.seek(e._positionWhenStartedFadeOut,{fadeInDuration:0,fadeOutDuration:0}).catch(function(t){e._logger.warn("Seek back to position where fade out started failed.",t)})})},e.prototype._afterUpdate=function(e,t){if(t.beforeUpdate||t.update.length>0)this._logger.error("Errors occurred during state update. Killing player.",t),this._triggerError(new n.PlayerFatalError("Errors occurred during state update.",t));else if(!e.dead&&e.ready){var r=e.duration;null!==r&&!e.seeking&&e.position>r&&(this._logger.error("Player provided invalid position.",e.position,r),this._triggerError(new p.ImplementationError("Player provided a position that was invalid.")))}this._finalizeState(e)},e.prototype._afterDispatches=function(){var e=this,t=this._errors;this._errors=[],t.forEach(function(t){return e._onError.dispatch(t)})},e.prototype._onChange=function(e,t){var r=this,n=e.ready,o=e.dead,i=e.fatalError,a=e.playing,s=e.actuallyPlaying,l=e.ended;if(!0===n&&(this._logger.debug("Resolving ready deferred."),this._readyDeferred.resolve(void 0)),!0===a&&this._mediaSessionEnabled&&!this._mediaSessionManagerHandle&&this.registerMediaSessionActionHandlers({play:!0,pause:!0,seekForward:!0,seekBackward:!0}),t.pauseDeferred&&!t.pauseDeferred.isSettled()&&t.playing){var c=this._lastPauseError||Error("Pause request aborted.");this._logger.debug("Rejecting pause deferred.",c),t.pauseDeferred.reject(c)}if(t.playDeferred&&!t.playDeferred.isSettled()&&!t.playing){var c=this._lastPlayError||Error("Play request aborted.");this._logger.debug("Rejecting play deferred.",c),t.playDeferred.reject(c)}if(t.playDeferred&&!t.playDeferred.isSettled()&&t.actuallyPlaying&&(this._logger.debug("Resolving play deferred."),t.playDeferred.resolve(void 0)),!t.pauseDeferred||t.pauseDeferred.isSettled()||t.actuallyPlaying||(this._logger.debug("Resolving pause deferred."),t.pauseDeferred.resolve(void 0)),!0===s&&!t.ended||!1===l&&t.actuallyPlaying?this._timePlaybackStarted=u.now():(!1===s&&!t.ended||!0===l&&t.actuallyPlaying)&&(this._listenTimeBase+=u.now()-this._timePlaybackStarted,this._timePlaybackStarted=null),!0===o){this._logger.debug("Calling _kill() on player.");try{this._kill(),this._logger.info("Player killed.")}catch(e){this._triggerError(new p.ImplementationError("Exception occurred in _kill().",e)),this._logger.error("Exception when implementation was being killed.",e)}if(this.unregisterMediaSessionActionHandlers(),!t.ready){var c=i||Error("Player was killed.");this._logger.debug("Rejecting whenReady."),this._readyDeferred.reject(c)}this._queuedSeekDeferreds.forEach(function(e){var t=e.position,n=e.deferred,o=i||Error("Seek aborted as player killed.");r._logger.debug("Rejecting seek().",t),n.reject(o)}),this._queuedSeekDeferreds=[],this._stateManager.kill(),this._logger.debug("Player dead.")}},e}();t.BasePlayer=y},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){return e.call(this,t||"The player cannot play the provided descriptor.")||this}return o(t,e),t.prototype.getCode=function(){return"NOT_SUPPORTED_ERROR"},t}(r(5).PlayerFatalError);t.NotSupportedError=i},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.State||(t.State={}))[n.LOADING=0]="LOADING",n[n.PLAYING=1]="PLAYING",n[n.PAUSED=2]="PAUSED",n[n.DEAD=3]="DEAD"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(30),o=r(2);function i(e){var t=Object.create(null);return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}var a=function(){},s=function(){function e(e,t){void 0===t&&(t={});var r=this;this._subscribers=[],this._onExit=new n.OnExit(function(){return r._after()},function(){return r._onEnter()}),this._beforeUpdateError=void 0,this._inAfterUpdate=!1,this._dead=!1,this._officiallyDead=!1,this._errors=[],this._state=i(e),this._initialState=i(e),this._beforeUpdate=t.beforeUpdate||function(){},this._afterUpdate=t.afterUpdate||a,this._afterDispatches=t.afterDispatches||a}return e.prototype.subscribe=function(e,t){var r=this;if(void 0===t&&(t=!0),this._dead){var n=!1;return{retrieve:function(){},remove:function(){return!n&&(n=!0)}}}var o={callback:e,localState:t?i(this._state):this._initialState};return this._subscribers.push(o),t||this._updateSubscriber(o),{remove:function(){var t=r._subscribers.map(function(e){return e.callback}).indexOf(e);return t>=0&&(r._subscribers.splice(t,1),!0)},retrieve:function(){r._updateSubscriber(o)}}},e.prototype.subscribeIndividual=function(e,t,r){return this.subscribe(function(r){var n=r[e];void 0!==n&&t(n)},r)},e.prototype.getHandle=function(){return{subscribe:this.subscribe.bind(this)}},e.prototype.getIndividualHandle=function(e){var t=this;return{subscribe:function(r){return t.subscribeIndividual(e,r)}}},e.prototype.update=function(e){var t=this;!this._officiallyDead&&(this._inAfterUpdate?e&&e(this._state,this._beforeUpdateError):this._onExit.enter(function(r){r.getResult(function(){try{e&&e(t._state,t._beforeUpdateError)}catch(e){t._errors.push(e)}})}))},e.prototype.getState=function(){return this._state},e.prototype.kill=function(){var e=this;this._dead||(this._dead=!0,window.setTimeout(function(){e._subscribers.splice(0),e._officiallyDead=!0},0))},e.prototype.isDead=function(){return this._dead},e.prototype._onEnter=function(){this._beforeUpdateError=void 0;try{this._beforeUpdate(this._state)}catch(e){this._beforeUpdateError=e}},e.prototype._after=function(){var e=this,t=this._errors;this._errors=[],o.deferException(function(){e._inAfterUpdate=!0;try{e._afterUpdate(e._state,{beforeUpdate:e._beforeUpdateError,update:t})}catch(t){throw e._inAfterUpdate=!1,t}e._inAfterUpdate=!1,e._subscribers.slice().forEach(function(t){return e._updateSubscriber(t)}),e._afterDispatches(e._state)})},e.prototype._updateSubscriber=function(e){var t=this._calculateDiff(e.localState);Object.keys(t).length&&(e.localState=i(this._state),o.deferException(function(){return e.callback(t,e.localState)}))},e.prototype._calculateDiff=function(e){var t=this,r=Object.create(null);return Object.keys(this._state).forEach(function(n){var o=t._state[n];o!==e[n]&&(r[n]=o)}),r},e}();t.StateManager=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=function(){function e(e,t){this._inCallback=!1,this._onExit=e,this._onEnter=t||null}return e.prototype.enter=function(e){var t=this;if(this._inCallback)return e?e(this._onEnterResultRetriever):void 0;this._inCallback=!0;var r=[],o=!1;this._onEnter&&(this._onEnterResultRetriever={getResult:function(e){o?n.deferException(function(){return e(t._onEnterError,t._onEnterResult)}):r.push(e)}});try{var i=e?e(this._onEnterResultRetriever):void 0;if(this._onEnter){this._onEnterError=void 0,this._onEnterResult=void 0;try{this._onEnterResult=this._onEnter()}catch(e){this._onEnterError=e}o=!0,r.forEach(function(e){return n.deferException(function(){return e(t._onEnterError,t._onEnterResult)})})}return i}finally{this._inCallback=!1,n.deferException(function(){return t._onExit(t._onEnterError,t._onEnterResult)})}},e}();t.OnExit=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,r){return e.call(this,t,r)||this}return o(t,e),t.prototype.getCode=function(){return"IMPLEMENTATION_ERROR"},t}(r(5).PlayerFatalError);t.ImplementationError=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysAllowSeekStrategy={isSeekAllowed:function(){return!0}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,r,n){void 0===n&&(n="The player that the proxy was controlling had an error.");var o=e.call(this,n)||this;return o._providedPlayerError=t,o._providedPlayer=r,o}return o(t,e),t.prototype.getCode=function(){return"PROXY_PLAYER_PROVIDED_PLAYER_ERROR"},t.prototype.getProvidedPlayerError=function(){return this._providedPlayerError},t.prototype.getProvidedPlayer=function(){return this._providedPlayer},t}(r(12).PlayerError);t.ProxyProvidedPlayerError=i},function(e,t,r){"use strict";var n=Object.create,o=Object.getPrototypeOf,i={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;return"function"==typeof e&&o(e(t(null),i))===i}},function(e,t,r){"use strict";var n,o,i,a,s=r(36),u=r(0),l=Object.prototype.isPrototypeOf,c=Object.defineProperty,d={configurable:!0,enumerable:!1,writable:!0,value:void 0};a=function(e,t){if(u(e),null===t||s(t))return e;throw TypeError("Prototype must be null or an object")},e.exports=(n=function(){var e,t=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{(e=n.set).call(t,r)}catch(e){}if(Object.getPrototypeOf(t)===r)return{set:e,level:2}}return(t.__proto__=r,Object.getPrototypeOf(t)===r)?{level:2}:((t={}).__proto__=r,Object.getPrototypeOf(t)===r&&{level:1})}())?(2===n.level?n.set?(i=n.set,o=function(e,t){return i.call(a(e,t),t),e}):o=function(e,t){return a(e,t).__proto__=t,e}:o=function e(t,r){var n;return a(t,r),(n=l.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===r&&(r=e.nullPolyfill),t.__proto__=r,n&&c(e.nullPolyfill,"__proto__",d),t},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:n.level})):null,r(69)},function(e,t,r){"use strict";var n=r(6),o={function:!0,object:!0};e.exports=function(e){return n(e)&&o[typeof e]||!1}},function(e,t,r){"use strict";var n=r(72),o=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(e){return!(!n(e)||o.test(i.call(e)))}},function(e,t,r){"use strict";var n=r(6),o=Array.prototype.forEach,i=Object.create,a=function(e,t){var r;for(r in e)t[r]=e[r]};e.exports=function(e){var t=i(null);return o.call(arguments,function(e){n(e)&&a(Object(e),t)}),t}},function(e,t,r){"use strict";e.exports=r(79)()?String.prototype.contains:r(80)},function(e,t,r){"use strict";var n=r(13),o=r(14),i=r(81),a=r(110),s=r(111),u=r(3).iterator;e.exports=function(e){return"function"==typeof s(e)[u]?e[u]():n(e)?new i(e):o(e)?new a(e):new i(e)}},function(e,t,r){"use strict";var n=r(86);e.exports=function(e){if(!n(e))throw TypeError(e+" is not a symbol");return e}},function(e,t,r){"use strict";var n,o=r(90),i=r(22),a=r(9),s=r(0),u=r(1),l=r(91),c=r(3),d=Object.defineProperty,f=Object.defineProperties;e.exports=n=function(e,t){if(!(this instanceof n))throw TypeError("Constructor requires 'new'");f(this,{__list__:u("w",s(e)),__context__:u("w",t),__nextIndex__:u("w",0)}),t&&(a(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete n.prototype.constructor,f(n.prototype,i({_next:u(function(){var e;if(this.__list__){if(this.__redo__&&void 0!==(e=this.__redo__.shift()))return e;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:u(function(){return this._createResult(this._next())}),_createResult:u(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:u(function(e){return this.__list__[e]}),_unBind:u(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:u(function(){return"[object "+(this[c.toStringTag]||"Object")+"]"})},l({_onAdd:u(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){d(this,"__redo__",u("c",[e]));return}this.__redo__.forEach(function(t,r){t>=e&&(this.__redo__[r]=++t)},this),this.__redo__.push(e)}}),_onDelete:u(function(e){var t;!(e>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__&&(-1!==(t=this.__redo__.indexOf(e))&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,r){t>e&&(this.__redo__[r]=--t)},this)))}),_onClear:u(function(){this.__redo__&&o.call(this.__redo__),this.__nextIndex__=0})}))),d(n.prototype,c.iterator,u(function(){return this}))},function(e,t,r){"use strict";var n=r(7),o=r(21),i=r(93),a=r(94),s=function(e,t){return e.replace("%v",a(t))};e.exports=function(e,t,r){if(!o(r))throw TypeError(s(t,e));if(!n(e)){if("default"in r)return r.default;if(r.isOptional)return null}var a=i(r.errorMessage);throw n(a)||(a=t),TypeError(s(a,e))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.5.7",t.buildNumber=2088;var n,o,i=r(4),a=r(45),s=r(11),u=r(50);t.ProxyPlayer=u.ProxyPlayer;var l=r(25);t.ProxyPlayerBase=l.ProxyPlayerBase;var c=r(52);t.errors=c.errors;var d=r(54);t.loaderErrors=d.loaderErrors;var f=r(56);t.helpers=f.helpers;var p=r(26);t.BasePlayer=p.BasePlayer;var _=r(28);t.State=_.State;var h=r(29);t.StateManager=h.StateManager;var g=r(115);t.TimeRange=g.TimeRange;var y=r(32);t.AlwaysAllowSeekStrategy=y.AlwaysAllowSeekStrategy;var v=r(116);t.NeverAllowSeekStrategy=v.NeverAllowSeekStrategy,(t.eventDispatcher||(t.eventDispatcher={})).EventDispatcher=i.EventDispatcher,(n=t.loader||(t.loader={})).LoaderRequest=a.LoaderRequest,n.ResponseState=a.ResponseState,(o=t.logger||(t.logger={})).noOpLogger=s.noOpLogger,o.consoleLogger=s.consoleLogger,o.prefixLogger=s.prefixLogger,o.cloneLogger=s.cloneLogger},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,i=r(10),a=r(4),s=r(23),u=r(2);(n=o=t.ResponseState||(t.ResponseState={}))[n.PENDING=0]="PENDING",n[n.WAITING=1]="WAITING",n[n.IN_PROGRESS=2]="IN_PROGRESS",n[n.COMPLETED=3]="COMPLETED",n[n.ERRORED=4]="ERRORED";var l=function(){function e(){var e=this;this._responseDeferred=i.buildDeferred(),this._requestStartCallbacks=[],this._parts=[],this._progressEventDispatcher=new a.EventDispatcher,this._cachedCompleteParts=null,this._state=o.PENDING,this._statusAndHeaders=null,this._getProgressSoFar=function(){if(!e._parts.length)return null;if(!e._statusAndHeaders)throw Error("Headers should be set.");return{initial:!0,statusCode:e._statusAndHeaders.statusCode,headers:e._statusAndHeaders.headers,part:e._getDataSoFar()}};var t=new s.AbortableJob(function(){return{result:e._responseDeferred.promise,progressUpdates:{getProgressSoFar:e._getProgressSoFar,onProgressUpdate:e._progressEventDispatcher}}},{storeResult:!0});this._jobHandle=t.run()}return e.prototype.onProgress=function(e){this._jobHandle.onProgressUpdate(e)},e.prototype.getResponse=function(){return this._jobHandle.whenComplete()},e.prototype.onRequestStart=function(e){this._state!==o.PENDING?u.deferException(e):this._requestStartCallbacks.push(e)},e.prototype.onResponseReceived=function(e){this._jobHandle.onCompletion(e)},e.prototype.onError=function(e){this._jobHandle.onError(e)},e.prototype.hasRequestStarted=function(){return this._state!==o.PENDING},e.prototype.hasCompleted=function(){return this._state===o.COMPLETED||this._state===o.ERRORED},e.prototype.getState=function(){return this._state},e.prototype.abort=function(){-1===[o.ERRORED,o.COMPLETED].indexOf(this._state)&&(this._jobHandle.abort(),this._state=o.ERRORED,this._abort())},e.prototype._signalRequestStart=function(){this._enforceState(o.PENDING),this._state=o.WAITING,this._requestStartCallbacks.splice(0).forEach(function(e){return u.deferException(e)})},e.prototype._signalTimeout=function(){this._enforceState(o.WAITING,o.IN_PROGRESS),this._state=o.COMPLETED,this._requestStartCallbacks.splice(0),this._responseDeferred.resolve(null)},e.prototype._provideStatusAndHeaders=function(e,t){this._enforceState(o.WAITING),this._statusAndHeaders=e,this._state=o.IN_PROGRESS,this._providePart(t)},e.prototype._providePart=function(e){this._enforceState(o.IN_PROGRESS);var t=!this._parts.length;if(this._parts.push(e),!this._statusAndHeaders)throw Error("Headers should be set.");this._progressEventDispatcher.dispatch({initial:t,statusCode:this._statusAndHeaders.statusCode,headers:this._statusAndHeaders.headers,part:e})},e.prototype._finalize=function(e){var t=this;if(e)this._enforceState(o.PENDING,o.WAITING,o.IN_PROGRESS),this._state=o.ERRORED,this._requestStartCallbacks.splice(0),this._responseDeferred.reject(e);else{if(this._enforceState(o.IN_PROGRESS),this._state=o.COMPLETED,!this._statusAndHeaders)throw Error("Headers should be set.");this._responseDeferred.resolve({statusCode:this._statusAndHeaders.statusCode,headers:this._statusAndHeaders.headers,getData:function(){if(!t._parts.length)throw Error("Unexpected error. No parts.");return t._cachedCompleteParts?t._cachedCompleteParts:t._cachedCompleteParts=t._getDataSoFar()}})}},e.prototype._getDataSoFar=function(){var e=this._parts.length;if(!e)throw Error("No parts.");return 1===e?this._parts[0]:this._reduceParts(this._parts)},e.prototype._enforceState=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(-1===e.indexOf(this._state))throw Error("Invalid state. Got "+this._state+" Expecting one of "+e.join(","))},e}();t.LoaderRequest=l},function(e,t,r){(function(t,n){var o;o=function(){"use strict";function e(e){return"function"==typeof e}var o,i,a,s,u=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=0,c=void 0,d=void 0,f=function(e,t){b[l]=e,b[l+1]=t,2===(l+=2)&&(d?d(E):P())},p="undefined"!=typeof window?window:void 0,_=p||{},h=_.MutationObserver||_.WebKitMutationObserver,g="undefined"==typeof self&&void 0!==t&&"[object process]"===({}).toString.call(t),y="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function v(){var e=setTimeout;return function(){return e(E,1)}}var b=Array(1e3);function E(){for(var e=0;e<l;e+=2)(0,b[e])(b[e+1]),b[e]=void 0,b[e+1]=void 0;l=0}var P=void 0;function m(e,t){var r,n=arguments,o=this,i=new this.constructor(w);void 0===i[k]&&H(i);var a=o._state;return a?(r=n[a-1],f(function(){return N(a,i,r,o._result)})):C(o,i,e,t),i}function S(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(w);return j(t,e),t}g?P=function(){return t.nextTick(E)}:h?(o=0,i=new h(E),a=document.createTextNode(""),i.observe(a,{characterData:!0}),P=function(){a.data=o=++o%2}):y?((s=new MessageChannel).port1.onmessage=E,P=function(){return s.port2.postMessage(0)}):P=void 0===p?function(){try{var e=r(49);return c=e.runOnLoop||e.runOnContext,void 0!==c?function(){c(E)}:v()}catch(e){return v()}}():v();var k=Math.random().toString(36).substring(16);function w(){}var O=void 0,R=new T;function D(e){try{return e.then}catch(e){return R.error=e,R}}function x(t,r,n){r.constructor===t.constructor&&n===m&&r.constructor.resolve===S?1===r._state?M(t,r._result):2===r._state?F(t,r._result):C(r,void 0,function(e){return j(t,e)},function(e){return F(t,e)}):n===R?F(t,R.error):void 0===n?M(t,r):e(n)?f(function(e){var t=!1,o=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(n,r,function(n){t||(t=!0,r!==n?j(e,n):M(e,n))},function(r){t||(t=!0,F(e,r))},"Settle: "+(e._label||" unknown promise"));!t&&o&&(t=!0,F(e,o))},t):M(t,r)}function j(e,t){e===t?F(e,TypeError("You cannot resolve a promise with itself")):"function"==typeof t||"object"==typeof t&&null!==t?x(e,t,D(t)):M(e,t)}function A(e){e._onerror&&e._onerror(e._result),I(e)}function M(e,t){e._state===O&&(e._result=t,e._state=1,0!==e._subscribers.length&&f(I,e))}function F(e,t){e._state===O&&(e._state=2,e._result=t,f(A,e))}function C(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+1]=r,o[i+2]=n,0===i&&e._state&&f(I,e)}function I(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)n=t[a],o=t[a+r],n?N(r,n,o,i):o(i);e._subscribers.length=0}}function T(){this.error=null}var L=new T;function N(t,r,n,o){var i=e(n),a=void 0,s=void 0,u=void 0,l=void 0;if(i){if((a=function(e,t){try{return e(t)}catch(e){return L.error=e,L}}(n,o))===L?(l=!0,s=a.error,a=null):u=!0,r===a){F(r,TypeError("A promises callback cannot return that same promise."));return}}else a=o,u=!0;r._state!==O||(i&&u?j(r,a):l?F(r,s):1===t?M(r,a):2===t&&F(r,a))}var U=0;function H(e){e[k]=U++,e._state=void 0,e._result=void 0,e._subscribers=[]}function B(e,t){this._instanceConstructor=e,this.promise=new e(w),this.promise[k]||H(this.promise),u(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&M(this.promise,this._result))):F(this.promise,Error("Array Methods must be provided an Array"))}function q(e){this[k]=U++,this._result=this._state=void 0,this._subscribers=[],w!==e&&("function"!=typeof e&&function(){throw TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q?function(e,t){try{t(function(t){j(e,t)},function(t){F(e,t)})}catch(t){F(e,t)}}(this,e):function(){throw TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return B.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===O&&r<e;r++)this._eachEntry(t[r],r)},B.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===S){var o=D(e);if(o===m&&e._state!==O)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===q){var i=new r(w);x(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},B.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===O&&(this._remaining--,2===e?F(n,r):this._result[t]=r),0===this._remaining&&M(n,this._result)},B.prototype._willSettleAt=function(e,t){var r=this;C(e,void 0,function(e){return r._settledAt(1,t,e)},function(e){return r._settledAt(2,t,e)})},q.all=function(e){return new B(this,e).promise},q.race=function(e){var t=this;return new t(u(e)?function(r,n){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(r,n)}:function(e,t){return t(TypeError("You must pass an array to race."))})},q.resolve=S,q.reject=function(e){var t=new this(w);return F(t,e),t},q._setScheduler=function(e){d=e},q._setAsap=function(e){f=e},q._asap=f,q.prototype={constructor:q,then:m,catch:function(e){return this.then(null,e)}},q.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=q},q.Promise=q,q},e.exports=o()}).call(this,r(47),r(48))},function(e,t){var r,n,o,i=e.exports={};function a(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var l=[],c=!1,d=-1;function f(){c&&o&&(c=!1,o.length?l=o.concat(l):d=-1,l.length&&p())}function p(){if(!c){var e=u(f);c=!0;for(var t=l.length;t;){for(o=l,l=[];++d<t;)o&&o[d].run();d=-1,t=l.length}o=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function _(e,t){this.fun=e,this.array=t}function h(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new _(e,t)),1!==l.length||c||u(p)},_.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),a=r(11),s=r(25),u=r(19),l=function(e){function t(t){var r=e.call(this,t)||this;return r._onPlayerProvided=new i.EventDispatcher,r._onPlayerRemoved=new i.EventDispatcher,r._shouldPassThroughFatalErrors=!!t.shouldPassThroughFatalErrors,r.onPlayerProvided=r._onPlayerProvided.getHandle(),r.onPlayerRemoved=r._onPlayerRemoved.getHandle(),r._logger=a.prefixLogger(r._logger,"ProxyPlayer"),r}return o(t,e),t.prototype.providePlayer=function(e,t){void 0===t&&(t={}),this._providePlayer(e,t),this._onPlayerProvided.dispatch(e)},t.prototype.removePlayer=function(){var e=this._getPlayer();if(!e)throw Error("There is no player to remove.");this._removePlayer(),this._onPlayerRemoved.dispatch(e)},t.prototype.setInitialDuration=function(e){this._setInitialDuration(e)},t.prototype.getPlayer=function(){return this._getPlayer()},t.prototype._handleFatalError=function(e,t){this._shouldPassThroughFatalErrors?this._triggerError(e):this._triggerError(new u.ProxyProvidedPlayerFatalError(e,t))},t}(s.ProxyPlayerBase);t.ProxyPlayer=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof navigator&&"mediaSession"in navigator?navigator.mediaSession:null,o=function(){function e(e){this._mediaSession=e,this._stack=[],this._active=null}return e.prototype.register=function(e){var t=this;if(!this._mediaSession)return{remove:function(){}};this._stack.length?this._stack.splice(1,0,e):(this._stack.push(e),this._makeActive(e));var r=e.getPlayer().onChange.subscribe(function(r){void 0!==r.playing&&t._handleUpdate(e)});this._handleUpdate(e);var n=!1;return{remove:function(){if(!n){n=!0,r.remove();var o=t._stack.indexOf(e);o>=0&&t._stack.splice(o,1),t._stack.length?t._makeActive(t._stack[0]):(t._active=null,t._updateHandlers({}),t._mediaSession.playbackState="none")}}}},e.prototype._handleUpdate=function(e){var t=e.getPlayer().isPlaying();t&&this._makeActive(e),this._isActive(e)&&(this._mediaSession.playbackState=t?"playing":"paused")},e.prototype._isActive=function(e){return this._active===e},e.prototype._makeActive=function(e){if(!this._isActive(e)){var t=this._stack.indexOf(e);t>=0&&this._stack.splice(t,1),this._stack.unshift(e),this._active=e,this._updateHandlers(e.getHandlers())}},e.prototype._updateHandlers=function(e){this._mediaSession.setActionHandler("play",e.play||null),this._mediaSession.setActionHandler("pause",e.pause||null),this._mediaSession.setActionHandler("seekforward",e.seekForward||null),this._mediaSession.setActionHandler("seekbackward",e.seekBackward||null)},e}();t.MediaSessionManager=o,t.mediaSessionManager=new o(n);var i=function(){function e(e,t){void 0===t&&(t={}),this._player=e,this._handlers=t}return e.prototype.getHandlers=function(){return this._handlers},e.prototype.getPlayer=function(){return this._player},e}();t.MediaSessionItem=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(27),i=r(53),a=r(31),s=r(19),u=r(12),l=r(5);(n=t.errors||(t.errors={})).PlayerError=u.PlayerError,n.PlayerFatalError=l.PlayerFatalError,n.NotSupportedError=o.NotSupportedError,n.URLUpdateError=i.URLUpdateError,n.ImplementationError=a.ImplementationError,n.ProxyProvidedPlayerFatalError=s.ProxyProvidedPlayerFatalError},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,r){return e.call(this,t||"The URL update failed for some reason.",r)||this}return o(t,e),t.prototype.getCode=function(){return"URL_UPDATE_ERROR"},t}(r(5).PlayerFatalError);t.URLUpdateError=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(55);(t.loaderErrors||(t.loaderErrors={})).LoaderError=n.LoaderError},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._msg=e,this._cause=t}return e.prototype.getMsg=function(){return this._msg},e.prototype.getCause=function(){return this._cause},e}();t.LoaderError=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,i,a,s,u,l=r(10),c=r(23),d=r(57),f=r(30),p=r(18),_=r(58),h=r(16),g=r(8),y=r(59),v=r(17),b=r(60),E=r(61),P=r(2),m=r(24),S=r(62),k=r(64);(n=t.helpers||(t.helpers={})).OnExit=f.OnExit,n.find=p.find,n.Promise=g.Promise,n.promiseWithTimeout=y.promiseWithTimeout,n.always=v.always,n.compact=b.compact,n.deferException=P.deferException,n.SCWeakMap=k.SCWeakMap,(n.cache||(n.cache={})).buildCache=_.buildCache,(n.deferred||(n.deferred={})).buildDeferred=l.buildDeferred,(o=n.url||(n.url={})).getExtension=S.getExtension,o.buildAbsoluteUrl=S.buildAbsoluteUrl,(i=n.abortableJob||(n.abortableJob={})).AbortableJob=c.AbortableJob,i.map=c.map,i.abortedError=c.abortedError,(a=n.retry||(n.retry={})).retry=d.retry,a.buildExponentialDelayCalculator=d.buildExponentialDelayCalculator,(s=n.browser||(n.browser={})).isSafari=m.isSafari,s.getSafariVersion=m.getSafariVersion,s.isIE=m.isIE,s.isEdge=m.isEdge,s.isFirefox=m.isFirefox,s.isChrome=m.isChrome,s.getChromeVersion=m.getChromeVersion,s.getFirefoxVersion=m.getFirefoxVersion,(u=n.arrayBuffer||(n.arrayBuffer={})).combine=E.combine,u.fill=E.fill,u.forEach=E.forEach,u.numberToUint8Array=E.numberToUint8Array,u.createVintBuffer=E.createVintBuffer,(n.time||(n.time={})).now=h.now},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.retry=function(e,t,r){void 0===r&&(r={});var o=null,i=0,a=!1,s=null,u=function(){var l=!1;s=t({attemptNum:i,scheduleRetry:function(){if(l)throw Error("scheduleRetry() already called.");if(l=!0,s=null,a)return!1;var t=e(++i);if(null!==t)return o=window.setTimeout(u,t),!0;var c=r.onNoMoreRetries;return c&&n.deferException(function(){return c()}),!1}})||null};return u(),{cancel:function(){!a&&(a=!0,o&&(window.clearTimeout(o),o=null),s&&s.onCancel())}}},t.buildExponentialDelayCalculator=function(e){var t=void 0===e?{}:e,r=t.timeBase,n=void 0===r?500:r,o=t.threshold,i=void 0===o?3:o,a=t.delayCap,s=void 0===a?45e3:a,u=t.jitter,l=void 0===u?200:u,c=t.maxAttempts,d=void 0===c?null:c;if(n<=0)throw Error("Time base must be > 0.");if(i<=0)throw Error("Threshold must be > 0.");if(null!==s&&s<=0)throw Error("Delay cap must be null or > 0.");if(null!==d&&d<1)throw Error("Max attempts must be >= 1.");return function(e){return null!==d&&e>=d?null:Math.min((e>0?Math.pow(2,e/i-1):0)*n,s||1/0)+Math.round(Math.random()*l)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18),o="undefined"!=typeof window&&"Map"in window;t.buildCache=function(){return o?new window.Map:new i};var i=function(){function e(){this._store=[]}return e.prototype.set=function(e,t){var r=n.find(this._store,function(t){return t.key===e});r?r.val=t:this._store.push({key:e,val:t})},e.prototype.get=function(e){var t=n.find(this._store,function(t){return t.key===e});if(t)return t.val},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),o=r(17);t.promiseWithTimeout=function(e,t,r){return void 0===r&&(r=Error("Timed out.")),new n.Promise(function(n,i){var a=window.setTimeout(function(){i(r)},t);o.always(e,function(e){return window.clearTimeout(a),e}).then(n,i)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compact=function(e){return e.filter(function(e){return null!=e})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combine=function(e){var t=new Uint8Array(e.reduce(function(e,t){return e+t.byteLength},0)),r=0;return e.forEach(function(e){t.set(e,r),r+=e.byteLength}),t},t.fill=function(e,t){if(Uint8Array.prototype.fill)e.fill(t);else for(var r=0;r<e.length;r++)e[r]=t},t.forEach=function(e,t){if(Uint8Array.prototype.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r],r)},t.numberToUint8Array=function(e,t){if(void 0===t&&(t=!1),(e=Math.round(e))<0)throw Error("Negative numbers not supported.");for(var r=Math.max(1,Math.ceil(Math.log(e+1)/Math.log(2)/8)),n=new Uint8Array(r),o=0;o<r;o++)n[t?o:r-1-o]=255&e,e>>>=8;return n},t.createVintBuffer=function(e){if(e<0||e>9007199254740992)throw Error("Unrepresentable value: "+e);for(t=1;t<=8&&!(e<Math.pow(2,7*t)-1);t++);for(var t,r=new Uint8Array(t),n=1;n<=t;n++){var o=255&e;r[t-n]=o,e-=o,e/=256}return r[0]|=1<<8-t,r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(63),o=/^.*\.([^\.;\?#]*).*$/;t.getExtension=function(e){var t=o.exec(e);return t?t[1].toLowerCase():null},t.buildAbsoluteUrl=function(e,t){return n.buildAbsoluteURL(e,t,{alwaysNormalize:!0})}},function(e,t,r){var n,o,i,a,s;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=s.parseURL(e);if(!n)throw Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}var i=s.parseURL(t);if(!i)throw Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=s.normalizePath(i.path),s.buildURLFromParts(i)):t;var a=s.parseURL(e);if(!a)throw Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var u=o.exec(a.path);a.netLoc=u[1],a.path=u[2]}a.netLoc&&!a.path&&(a.path="/");var l={scheme:a.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(l.netLoc=a.netLoc,"/"!==i.path[0])){if(i.path){var c=a.path,d=c.substring(0,c.lastIndexOf("/")+1)+i.path;l.path=s.normalizePath(d)}else l.path=a.path,i.params||(l.params=a.params,i.query||(l.query=a.query))}return null===l.path&&(l.path=r.alwaysNormalize?s.normalizePath(i.path):i.path),s.buildURLFromParts(l)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65),o=function(){function e(){this._map=new n}return e.prototype.get=function(e){return this._map.get(e)},e.prototype.set=function(e,t){this._map.set(e,t)},e.prototype.has=function(e){return this._map.has(e)},e.prototype.delete=function(e){return this._map.delete(e)},e}();t.SCWeakMap=o},function(e,t,r){"use strict";e.exports=r(66)()?WeakMap:r(67)},function(e,t,r){"use strict";e.exports=function(){var e,t;if("function"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(e){return!1}return"[object WeakMap]"===String(e)&&"function"==typeof e.set&&e.set({},1)===e&&"function"==typeof e.delete&&"function"==typeof e.has&&"one"===e.get(t)}},function(e,t,r){"use strict";var n,o=r(20),i=r(70),a=r(0),s=r(71),u=r(1),l=r(40),c=r(113),d=r(3).toStringTag,f=r(114),p=Array.isArray,_=Object.defineProperty,h=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf;e.exports=n=function(){var e,t=arguments[0];if(!(this instanceof n))throw TypeError("Constructor requires 'new'");return f&&o&&WeakMap!==n?e=o(new WeakMap,g(this)):e=this,null==t||p(t)||(t=l(t)),_(e,"__weakMapData__",u("c","$weakMap$"+s())),t&&c(t,function(t){a(t),e.set(t[0],t[1])}),e},f&&(o&&o(n,WeakMap),n.prototype=Object.create(WeakMap.prototype,{constructor:u(n)})),Object.defineProperties(n.prototype,{delete:u(function(e){return!!h.call(i(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)}),get:u(function(e){if(h.call(i(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:u(function(e){return h.call(i(e),this.__weakMapData__)}),set:u(function(e,t){return _(i(e),this.__weakMapData__,u("c",t)),this}),toString:u(function(){return"[object WeakMap]"})}),_(n.prototype,d,u("c","WeakMap"))},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n,o,i,a,s=Object.create;r(34)()||(a=r(35)),e.exports=a&&1===a.level?(n={},o={},i={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){if("__proto__"===e){o[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}o[e]=i}),Object.defineProperties(n,o),Object.defineProperty(a,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:n}),function(e,t){return s(null===e?n:e,t)}):s},function(e,t,r){"use strict";var n=r(36);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an Object");return e}},function(e,t,r){"use strict";var n=Object.create(null),o=Math.random;e.exports=function(){var e;do e=o().toString(36).slice(2);while(n[e]);return e}},function(e,t,r){"use strict";var n=r(73);e.exports=function(e){if("function"!=typeof e||!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length||"function"!=typeof e.call||"function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},function(e,t,r){"use strict";var n=r(21);e.exports=function(e){if(!n(e))return!1;try{if(!e.constructor)return!1;return e.constructor.prototype===e}catch(e){return!1}}},function(e,t,r){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){"use strict";var n=r(76),o=r(0),i=Math.max;e.exports=function(e,t){var r,a,s,u=i(arguments.length,2);for(a=1,e=Object(o(e)),s=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}};a<u;++a)t=arguments[a],n(t).forEach(s);if(void 0!==r)throw r;return e}},function(e,t,r){"use strict";e.exports=r(77)()?Object.keys:r(78)},function(e,t,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(6),o=Object.keys;e.exports=function(e){return o(n(e)?Object(e):e)}},function(e,t,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},function(e,t,r){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t,r){"use strict";var n,o=r(20),i=r(39),a=r(1),s=r(3),u=r(42),l=Object.defineProperty;n=e.exports=function(e,t){if(!(this instanceof n))throw TypeError("Constructor requires 'new'");u.call(this,e),l(this,"__kind__",a("",t=t?i.call(t,"key+value")?"key+value":i.call(t,"key")?"key":"value":"value"))},o&&o(n,u),delete n.prototype.constructor,n.prototype=Object.create(u.prototype,{_resolve:a(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),l(n.prototype,s.toStringTag,a("c","Array Iterator"))},function(e,t,r){"use strict";var n=r(15),o={object:!0,symbol:!0};e.exports=function(){var e,t=n.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!o[typeof t.iterator]&&!!o[typeof t.toPrimitive]&&!!o[typeof t.toStringTag]}},function(e,t,r){"use strict";e.exports=function(){return!!("object"==typeof globalThis&&globalThis)&&globalThis.Array===Array}},function(e,t){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{if(!__global__)return r();return __global__}finally{delete Object.prototype.__global__}}()},function(e,t,r){"use strict";var n,o,i,a=r(1),s=r(41),u=r(15).Symbol,l=r(87),c=r(88),d=r(89),f=Object.create,p=Object.defineProperties,_=Object.defineProperty;if("function"==typeof u)try{String(u()),i=!0}catch(e){}else u=null;o=function(e){if(this instanceof o)throw TypeError("Symbol is not a constructor");return n(e)},e.exports=n=function e(t){if(this instanceof e)throw TypeError("Symbol is not a constructor");return i?u(t):p(f(o.prototype),{__description__:a("",t=void 0===t?"":String(t)),__name__:a("",l(t))})},c(n),d(n),p(o.prototype,{constructor:a(n),toString:a("",function(){return this.__name__})}),p(n.prototype,{toString:a(function(){return"Symbol ("+s(this).__description__+")"}),valueOf:a(function(){return s(this)})}),_(n.prototype,n.toPrimitive,a("",function(){var e=s(this);return"symbol"==typeof e?e:e.toString()})),_(n.prototype,n.toStringTag,a("c","Symbol")),_(o.prototype,n.toStringTag,a("c",n.prototype[n.toStringTag])),_(o.prototype,n.toPrimitive,a("c",n.prototype[n.toPrimitive]))},function(e,t,r){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},function(e,t,r){"use strict";var n=r(1),o=Object.defineProperty,i=Object.prototype,a=(0,Object.create)(null);e.exports=function(e){for(var t,r,s=0;a[e+(s||"")];)++s;return a[e+=s||""]=!0,o(i,t="@@"+e,n.gs(null,function(e){r||(r=!0,o(this,t,n(e)),r=!1)})),t}},function(e,t,r){"use strict";var n=r(1),o=r(15).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:n("",o&&o.hasInstance||e("hasInstance")),isConcatSpreadable:n("",o&&o.isConcatSpreadable||e("isConcatSpreadable")),iterator:n("",o&&o.iterator||e("iterator")),match:n("",o&&o.match||e("match")),replace:n("",o&&o.replace||e("replace")),search:n("",o&&o.search||e("search")),species:n("",o&&o.species||e("species")),split:n("",o&&o.split||e("split")),toPrimitive:n("",o&&o.toPrimitive||e("toPrimitive")),toStringTag:n("",o&&o.toStringTag||e("toStringTag")),unscopables:n("",o&&o.unscopables||e("unscopables"))})}},function(e,t,r){"use strict";var n=r(1),o=r(41),i=Object.create(null);e.exports=function(e){return Object.defineProperties(e,{for:n(function(t){return i[t]?i[t]:i[t]=e(String(t))}),keyFor:n(function(e){var t;for(t in o(e),i)if(i[t]===e)return t})})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(){return n(this).length=0,this}},function(e,t,r){"use strict";var n,o=r(7),i=r(92),a=r(96),s=r(97),u=r(38),l=r(107),c=Function.prototype.bind,d=Object.defineProperty,f=Object.prototype.hasOwnProperty;n=function(e,t,r){var n,o=i(t)&&a(t.value);return n=s(t),delete n.writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&f.call(this,e)?o:(t.value=c.call(o,r.resolveContext?r.resolveContext(this):this),d(this,e,t),this[e])},n},e.exports=function(e){var t=u(arguments[1]);return o(t.resolveContext)&&a(t.resolveContext),l(e,function(e,r){return n(r,e,t)})}},function(e,t,r){"use strict";var n=r(43),o=r(7);e.exports=function(e){return o(e)?e:n(e,"Cannot use %v",arguments[1])}},function(e,t,r){"use strict";var n=r(7),o=r(21),i=Object.prototype.toString;e.exports=function(e){if(!n(e))return null;if(o(e)){var t=e.toString;if("function"!=typeof t||t===i)return null}try{return""+e}catch(e){return null}}},function(e,t,r){"use strict";var n=r(95),o=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=n(e);return null===t?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+""),t=t.replace(o,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("Unexpected character")}}))}},function(e,t,r){"use strict";e.exports=function(e){try{return e.toString()}catch(t){try{return String(e)}catch(e){return null}}}},function(e,t,r){"use strict";var n=r(43),o=r(37);e.exports=function(e){return o(e)?e:n(e,"%v is not a plain function",arguments[1])}},function(e,t,r){"use strict";var n=r(98),o=r(22),i=r(0);e.exports=function(e){var t=Object(i(e)),r=arguments[1],a=Object(arguments[2]);if(t!==e&&!r)return t;var s={};return r?n(r,function(t){(a.ensure||t in e)&&(s[t]=e[t])}):o(s,e),s}},function(e,t,r){"use strict";e.exports=r(99)()?Array.from:r(100)},function(e,t,r){"use strict";e.exports=function(){var e,t,r=Array.from;return"function"==typeof r&&!!((t=r(e=["raz","dwa"]))&&t!==e&&"dwa"===t[1])}},function(e,t,r){"use strict";var n=r(3).iterator,o=r(13),i=r(101),a=r(102),s=r(9),u=r(0),l=r(6),c=r(14),d=Array.isArray,f=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},_=Object.defineProperty;e.exports=function(e){var t,r,h,g,y,v,b,E,P,m,S=arguments[1],k=arguments[2];if(e=Object(u(e)),l(S)&&s(S),this&&this!==Array&&i(this))t=this;else{if(!S){if(o(e))return 1!==(y=e.length)?Array.apply(null,e):((g=[,])[0]=e[0],g);if(d(e)){for(r=0,g=Array(y=e.length);r<y;++r)g[r]=e[r];return g}}g=[]}if(!d(e)){if(void 0!==(P=e[n])){for(b=s(P).call(e),t&&(g=new t),E=b.next(),r=0;!E.done;)m=S?f.call(S,k,E.value,r):E.value,t?(p.value=m,_(g,r,p)):g[r]=m,E=b.next(),++r;y=r}else if(c(e)){for(y=e.length,t&&(g=new t),r=0,h=0;r<y;++r)m=e[r],r+1<y&&(v=m.charCodeAt(0))>=55296&&v<=56319&&(m+=e[++r]),m=S?f.call(S,k,m,h):m,t?(p.value=m,_(g,h,p)):g[h]=m,++h;y=h}}if(void 0===y)for(y=a(e.length),t&&(g=new t(y)),r=0;r<y;++r)m=S?f.call(S,k,e[r],r):e[r],t?(p.value=m,_(g,r,p)):g[r]=m;return t&&(p.value=null,g.length=y),g}},function(e,t,r){"use strict";var n=Object.prototype.toString,o=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(e){return"function"==typeof e&&o(n.call(e))}},function(e,t,r){"use strict";var n=r(103),o=Math.max;e.exports=function(e){return o(0,n(e))}},function(e,t,r){"use strict";var n=r(104),o=Math.abs,i=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*i(o(e)):e}},function(e,t,r){"use strict";e.exports=r(105)()?Math.sign:r(106)},function(e,t,r){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&1===e(10)&&-1===e(-20)}},function(e,t,r){"use strict";e.exports=function(e){return isNaN(e=Number(e))||0===e?e:e>0?1:-1}},function(e,t,r){"use strict";var n=r(9),o=r(108),i=Function.prototype.call;e.exports=function(e,t){var r={},a=arguments[2];return n(t),o(e,function(e,n,o,s){r[n]=i.call(t,a,e,n,o,s)}),r}},function(e,t,r){"use strict";e.exports=r(109)("forEach")},function(e,t,r){"use strict";var n=r(9),o=r(0),i=Function.prototype.bind,a=Function.prototype.call,s=Object.keys,u=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(r,l){var c,d=arguments[2],f=arguments[3];return r=Object(o(r)),n(l),c=s(r),f&&c.sort("function"==typeof f?i.call(f,r):void 0),"function"!=typeof e&&(e=c[e]),a.call(e,c,function(e,n){return u.call(r,e)?a.call(l,d,r[e],e,r,n):t})}}},function(e,t,r){"use strict";var n,o=r(20),i=r(1),a=r(3),s=r(42),u=Object.defineProperty;n=e.exports=function(e){if(!(this instanceof n))throw TypeError("Constructor requires 'new'");e=String(e),s.call(this,e),u(this,"__length__",i("",e.length))},o&&o(n,s),delete n.prototype.constructor,n.prototype=Object.create(s.prototype,{_next:i(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:i(function(e){var t,r=this.__list__[e];return this.__nextIndex__===this.__length__?r:(t=r.charCodeAt(0))>=55296&&t<=56319?r+this.__list__[this.__nextIndex__++]:r})}),u(n.prototype,a.toStringTag,i("c","String Iterator"))},function(e,t,r){"use strict";var n=r(112);e.exports=function(e){if(!n(e))throw TypeError(e+" is not iterable");return e}},function(e,t,r){"use strict";var n=r(13),o=r(6),i=r(14),a=r(3).iterator,s=Array.isArray;e.exports=function(e){return!!o(e)&&(!!(s(e)||i(e)||n(e))||"function"==typeof e[a])}},function(e,t,r){"use strict";var n=r(13),o=r(9),i=r(14),a=r(40),s=Array.isArray,u=Function.prototype.call,l=Array.prototype.some;e.exports=function(e,t){var r,c,d,f,p,_,h,g,y=arguments[2];if(s(e)||n(e)?r="array":i(e)?r="string":e=a(e),o(t),d=function(){f=!0},"array"===r){l.call(e,function(e){return u.call(t,y,e,d),f});return}if("string"===r){for(p=0,_=e.length;p<_&&(h=e[p],p+1<_&&(g=h.charCodeAt(0))>=55296&&g<=56319&&(h+=e[++p]),u.call(t,y,h,d),!f);++p);return}for(c=e.next();!c.done;){if(u.call(t,y,c.value,d),f)return;c=e.next()}}},function(e,t,r){"use strict";e.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){if(this.start=e,this.duration=t,t<0)throw RangeError("Duration must be >= 0.");this.end=e+t}return e.normalizeRawTimeRanges=function(e){return e.slice(0).sort(function(e,t){return e.start-t.start}).reduce(function(e,t,r){var n=e.length-1;return r>0&&e[n].end>=t.start?e[n].end=t.end:e.push(t),e},[])},e.normalize=function(t){return e.normalizeRawTimeRanges(t.map(function(e){return{start:e.start,end:e.end}})).map(function(t){return new e(t.start,t.end-t.start)})},e.getCoverage=function(t){if(0===t.length)return new e(0,0);var r=1/0,n=0;return t.forEach(function(e){e.start<r&&(r=e.start),e.end>n&&(n=e.end)}),new e(r,n-r)},e.rangesContainTime=function(e,t){return t.some(function(t){return t.containsTime(e)})},e.prototype.containsTime=function(e){return this.start<=e&&this.end>e},e}();t.TimeRange=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NeverAllowSeekStrategy={isSeekAllowed:function(){return!1}}}])},e.exports=t()}}]);